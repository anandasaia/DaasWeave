"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
require("rxjs/add/operator/take");
var ColourMixer_1 = require("../../colour/ColourMixer");
var Observables_1 = require("../../state/Observables");
var Constants_1 = require("../../constants/Constants");
var Find_1 = require("../../utils/dom/element/Find");
/**
 * create a "confirm" button that dispatches the current hex value of the picker
 * @param options
 */
function createConfirmButton(options) {
    //  find the button element
    var buttonElement = Find_1.findByRoleWithin(options.elements.selector, Constants_1.pickMeConstants.elements.CONFIRM_BUTTON);
    //  add listeners to the button
    if (buttonElement) buttonElement.addEventListener('mouseup', function (event) {
        return confirmPicking(event);
    });
}
exports.createConfirmButton = createConfirmButton;
/**
 * confirm the current colour
 * @param event
 */
function confirmPicking(event) {
    //  manually update the external observable with the current colour
    ColourMixer_1.manualObservableHex.next(ColourMixer_1.hslToHexString(Observables_1.observableHue.getValue(), Observables_1.observableSaturation.getValue(), Observables_1.observableLightness.getValue()));
    //  close the colour picker
    Observables_1.activeID.next(null);
}