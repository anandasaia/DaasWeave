"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var Find_1 = require("../../../utils/dom/element/Find");
var Observables_1 = require("../../../state/Observables");
var Constants_1 = require("../../../constants/Constants");
/**
 * create and populate the toggle button
 * @param options
 */
function createToggle(options) {
  //  find the button element
  var element = Find_1.findByRoleWithin(options.elements.selector, Constants_1.pickMeConstants.elements.TOGGLE);
  //  and add listeners
  element.addEventListener('click', function (event) {
    return onToggleClick(event, options);
  });
  //  listen for active id changes
  Observables_1.activeID.subscribe(function (id) {
    return setActiveState(element, options.id === id);
  });
}
exports.createToggle = createToggle;
/**
 * when the user clicks the toggle, show or hide the colour picker popup
 * @param event
 * @param options
 */
var onToggleClick = function onToggleClick(event, options) {
  //  update the observable with the new active ID
  Observables_1.activeID.next(!getActiveState(event.currentTarget) ? options.id : null);
};
/**
 * test and return the toggle's state
 * @param element
 * @return {boolean}
 */
function getActiveState(element) {
  return element.dataset['active'] === 'true';
}
/**
 * get the toggle's active data-attribute
 * @param element
 * @param value
 */
function setActiveState(element, value) {
  //  set the new value
  element.dataset['active'] = value.toString();
  //  return the value
  return value;
}